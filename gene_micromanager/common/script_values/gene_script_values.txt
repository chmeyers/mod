

genemod_num_organic_pops = {
	complex_trigger_modifier = {
		trigger = count_owned_pop
		parameters = {
			limit = {
				species = { is_robotic = no }
			}
		}
		mode = add
	}
}

genemod_num_organic_unmanaged_pops = {
	complex_trigger_modifier = {
		trigger = count_owned_pop
		parameters = {
			limit = {
				species = { is_robotic = no }
				NOT = { has_pop_flag = gene_micromanaged_once }
			}
		}
		mode = add
	}
}

# This value will be 0 once 100% of pops have been micromanaged once
# and increase linearly to 1 at 90%, capped there.
genemod_capped_unmanaged_pops_mult = {
	add = value:genemod_num_organic_unmanaged_pops
	divide = value:genemod_num_organic_pops
	multiply = 10
	max = 1
}

# This represents the cost paid when >10% of your organic population
# remains unmodified. Either the edict has not had the chance to 
# get through your population once or you just got a large influx of
# new pops from somewhere.
edict_startup_cost_effect = {
	base = 0.66 # 80 unity per pop / 120 months
	mult = value:genemod_num_organic_pops
	mult = value:genemod_capped_unmanaged_pops_mult # capped at 1
}

# Balanced to take 10 years to transform every owned non-robotic pop.
# Vanilla trait modification cost is 3k + num_pops*(5 + (3 if climate_mod) + 20*trait_points_changed)
# Vanilla price is halved with the Genetics Retrovirus tradition.
# Our edict is only enabled if the Genetics Tradition Tree is completed,
# so we charge a flat 100 per pop, which is undercharging if we make a lot of changes, but
# overcharging if we just change a couple points worth.
edict_organic_pop_size_effect = {
	base = 0.17 # 20 unity cost / 120 months
	mult = value:genemod_num_organic_pops
	add = value:edict_startup_cost_effect
}

micromanager_pops_per_month = {
	base = 0
	add = value:genemod_num_organic_pops
	divide = 120
	round = yes
	min = 1
}

